# 🚀 快速启动指南

## 问题解决方案

如果您遇到"服务器不可用，看不到留言"的问题，请按以下步骤操作：

### 方法1：一键启动（推荐）

```bash
node start.js
```

这个脚本会自动：
- ✅ 检查Node.js版本
- ✅ 安装必要依赖
- ✅ 初始化留言数据
- ✅ 启动服务器
- ✅ 显示详细日志

### 方法2：手动启动

1. **安装依赖**
   ```bash
   npm install
   ```

2. **启动服务器**
   ```bash
   npm start
   ```

3. **访问网站**
   打开浏览器访问：http://localhost:3000

### 方法3：静态访问（功能受限）

直接双击打开 `index.html` 文件，使用本地存储功能。

## 🔧 调试工具

在开发环境（localhost）下，页面右上角会显示一个🔧调试按钮：

- **点击调试按钮**：查看系统状态
- **运行诊断**：检测服务器连接、LocalStorage、DOM元素等
- **实时监控**：查看留言数量、同步状态等信息

## 📊 API接口

服务器提供以下API接口：

- `GET /api/health` - 健康检查
- `GET /api/messages` - 获取所有留言
- `POST /api/messages` - 提交新留言
- `GET /api/debug` - 调试信息
- `DELETE /api/messages` - 清空数据（仅开发环境）

## 🌍 地理位置获取

系统支持多个地理位置API源：
1. ipapi.co
2. ip-api.com
3. ipify.org

如果所有API都失败，会显示"未知地区"。

## 🔄 同步机制

### 数据优先级：
1. **服务器数据** > 本地数据
2. **自动同步**：每30秒检查一次
3. **手动刷新**：点击刷新按钮
4. **离线支持**：服务器不可用时使用本地存储

### 故障排除：

1. **服务器启动失败**
   - 检查端口3000是否被占用
   - 确认Node.js版本 >= 14
   - 运行 `node start.js` 查看详细错误

2. **看不到留言**
   - 确保服务器正在运行
   - 检查浏览器控制台错误
   - 使用调试工具诊断

3. **地理位置不显示**
   - 检查网络连接
   - 某些地理位置API可能有访问限制
   - 本地访问会显示"本地网络"

## 📁 文件结构

```
test/
├── index.html          # 主页面
├── start.js           # 一键启动脚本
├── server.js          # Express服务器
├── package.json       # 项目配置
├── messages.json      # 留言数据（自动生成）
├── css/style.css      # 样式文件
├── js/script.js       # JavaScript逻辑
└── QUICK_START.md     # 本文档
```

## 🐛 常见问题

**Q: 为什么显示"服务器不可用"？**
A: 可能原因：
- 没有启动服务器
- 端口被占用
- 防火墙阻止

**Q: 留言保存失败怎么办？**
A: 检查服务器状态，留言会自动保存到本地作为备份。

**Q: 地理位置不准确？**
A: 某些网络环境下IP地址可能不准确，这是正常现象。

## 🆘 获取帮助

如果问题仍未解决：

1. 查看浏览器控制台（F12）
2. 使用调试工具运行诊断
3. 检查服务器启动日志
4. 确认所有文件都存在

---

💡 **提示**：建议使用 `node start.js` 一键启动，它包含了完整的错误检查和初始化流程。